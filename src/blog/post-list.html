<template>

    <!-- SITE WRAPPER -->
    <div id="eskimo-site-wrapper">
        <!-- MAIN CONTAINER -->
        <main id="eskimo-main-container" class="no-padding">
            <div class="container mt-3 mb-3">
                <form>
                    <button type="button" class="btn btn-eskimo mr-2" click.trigger="createNewPost()">
                        <span class="fa fa-plus fa-lg mr-2"></span>
                        <span t="postList.add"></span>
                    </button>
                    <button type="button" class="btn btn-eskimo mr-2" click.trigger="importData()">
                        <span class="fa fa-upload fa-lg mr-2"></span>
                        <span t="postList.import"></span>
                    </button>
                    <input id="fileChooser" type="file" name="images" accept=".zip" files.bind="zipFile"
                        style="position: absolute; left: 100px; top: -100px;">
                    <div class="input-group pull-right" style="width: 140px;">
                        <input type="text" class="form-control" value.bind="filter & debounce"
                            t="[placeholder]postList.filterList">
                        <div class="input-group-append" if.bind="filter">
                            <button class="btn btn-eskimo" type="button" click.delegate="filter = ''">
                                <i class="fa fa-times"></i>
                                <span class="sr-only" t="contacts.clear"></span>
                            </button>
                        </div>
                    </div>
                    <button type="button" class="btn btn-eskimo pull-right mr-2"
                        click.trigger="deleteSelectedPosts()" if.bind="selectedPosts.length>0">
                        <span class="fa fa-times fa-lg mr-2"></span>
                        <span t="postList.delete" t-params.bind="{count: selectedPosts.length}"></span>
                    </button>
                    <button type="button" class="btn btn-eskimo pull-right mr-2"
                        click.trigger="exportSelectedPosts()" if.bind="selectedPosts.length>0">
                        <span class="fa fa-download fa-lg mr-2"></span>
                        <span t="postList.export" t-params.bind="{count: selectedPosts.length}"></span>
                    </button>
                </form>
            </div>

            <section class="au-animate">
                <group-list
                    items.bind="posts | filterBy:filter: (currentLanguage=='fr') ? 'frenchTitle' : 'englishTitle'"
                    group-by="yearMonth" order-by="yearMonthDay" label="postList.post">
                    <template replace-part="item">
                        <div class="container">
                            <div class="row">
                                <div class="col">
                                    <!-- 1 CASE A COCHER POUR SELECTION -->
                                    <input type="checkbox" value="true" checked.bind="isChecked"
                                        change.delegate="checkChange($event.target.checked, group.key, group.items)"
                                        id="gridCheck${id}" class="mr-3 align-middle" style="transform: scale(2);">
                                    <!-- 1 BADGE POUR LA CATEGORIE -->
                                    <span class="badge badge-${category.color} text-monospace mt-1 mr-1 align-top">
                                        ${ (currentLanguage=='fr') ? category.frenchName : category.englishName }
                                    </span>
                                    <!-- 1 BADGE POUR CHAQUE TAGS -->
                                    <span class="badge badge-eskimo text-monospace mt-1 mr-1 align-top"
                                        repeat.for="tag of filtered(tags, currentLanguage)">
                                        ${tag.name}
                                    </span>
                                    <!-- LE TITRE DU BILLET -->
                                    <span class="text-dark">
                                        ${ (currentLanguage=='fr') ? frenchTitle : englishTitle }
                                    </span>

                                    <div class="floatingBar">
                                        <!-- LA DATE DE CREATION -->
                                        <span class="creation-date-col text-dark pull-right">
                                            ${creation | dateFormat: 'DD/MM' : currentLanguage}</span>
                                        <!-- 1 BOUTON POUR AJOUTER AUX FAVORIS -->
                                        <a href="#" click.trigger="switchFavorite($this)"
                                            class="${ (favorite) ? 'btn-favorite-on' : 'btn-favorite-off' } pull-right mr-2">
                                            <span class="fa fa-star fa-2x"></span></a>
                                        <!-- 1 BOUTON POUR VOIR LE BILLET -->
                                        <a route-href="route: postView; params.bind: { id: id }"
                                            class="btn-view pull-right mr-2">
                                            <span class="fa fa-asterisk fa-2x"></span></a>
                                        <!-- 1 BOUTON POUR SUPPRIMER LE BILLET -->
                                        <a href="#" click.trigger="deletePost($this)" class="btn-delete pull-right mr-2">
                                            <span class="fa fa-times fa-2x"></span></a>
                                        <!-- 1 BOUTON POUR EDITER LE BILLET -->
                                        <a route-href="route: postEdit; params.bind: { id: id }"
                                            class="btn-edit pull-right mr-2">
                                            <span class="fa fa-pencil fa-2x"></span></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>
                    </template>
                </group-list>
            </section>

        </main>
    </div>

</template>
