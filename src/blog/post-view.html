<template>

    <!-- READING POSITION INDICATOR -->
    <reading-position></reading-position>
    <!-- TOP HEADER -->
    <compose view-model="../top-header"></compose>
    <!-- SITE WRAPPER -->
    <div id="eskimo-site-wrapper">

        <!-- FEATURED IMAGE FOR MOBILE -->
        <div if.bind="post.image && post.media == 1 || post.media == 2" class="eskimo-featured-img eskimo-featured-img-mobile">
            <img src="${post.image}" alt="" />
        </div>

        <!-- MAIN CONTAINER -->
        <main id="eskimo-main-container">
            <div class="container">
                <div class="clearfix"></div>
                <!-- TAGS -->
                <div class="eskimo-meta-tags mt-4">
                    <!-- 1 BADGE POUR LA CATEGORIE -->
                    <a route-href="route: postsGridView; params.bind: { categoryId: post.category.id }">
                        <span class="badge badge-${post.category.color} text-monospace mt-1 mr-1 align-top">
                            ${ (currentLanguage=='fr') ? post.category.frenchName : post.category.englishName }
                        </span>
                    </a>
                    <!-- 1 BADGE POUR CHAQUE TAGS -->
                    <span class="badge badge-default text-monospace"
                        repeat.for="tag of filtered(post.tags, currentLanguage)">
                        <a route-href="route:tag">${tag.name}</a>
                    </span>
                </div>
                <!-- PAGE TITLE -->
                <div class="eskimo-page-title">
                    <h1><span>${ (currentLanguage=='fr') ? post.frenchTitle : post.englishTitle}</span></h1>
                    <div class="eskimo-page-title-meta">
                        <div class="eskimo-author-meta">
                            <label t="postView.by"></label>
                            <a class="author-meta" href="#"
                                click.trigger="navigateToAuthorUrl(post.author)">${post.author.name}</a>
                        </div>
                        <div class="eskimo-date-meta">
                            <label t="postView.on"></label>
                            ${post.creation| dateFormat: 'DD MMMM YYYY' : currentLanguage }
                        </div>
                        <div class="eskimo-reading-meta">
                            <label t="postView.readingTime" t-params.bind="{minutes: post.readingTime}"></label>
                        </div>
                    </div>
                </div>
                <!-- FEATURED IMAGE FOR DESKTOP -->
                <div if.bind="post.image && post.media == 1" class="eskimo-featured-img eskimo-featured-img-desktop">
                    <img src="${post.image}" alt="" style="height: 200px;" />
                </div>

                <!-- POST CONTENT -->
                <div class="eskimo-page-content"
                    innerhtml.bind="(currentLanguage=='fr') ? post.frenchContent : post.englishContent">
                </div>
                <div class="clearfix"></div>
                <!-- SOCIAL SHARING -->
                <rrssb></rrssb>
            </div>
        </main>
    </div>
    <!-- GO TO TOP BUTTON -->
    <goto-top></goto-top>

    <!-- JS FILES -->
    <scriptinjector url="javascript/post-slider.js"></scriptinjector>
    <scriptinjector url="javascript/post-carousel.js"></scriptinjector>
    <scriptinjector url="javascript/featherlight.js"></scriptinjector>

</template>
